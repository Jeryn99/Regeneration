buildscript {
	repositories {
		maven { url = 'https://files.minecraftforge.net/maven' }
		jcenter()
		mavenCentral()
	}
	dependencies {
		classpath 'net.minecraftforge.gradle:ForgeGradle:3.+'
	}
}

apply plugin: 'net.minecraftforge.gradle'
// Only edit below this line, the above code adds and enables the necessary things for Forge to be setup.
apply plugin: 'eclipse'
apply plugin: 'maven-publish'

version = project.mod_version
group = project.maven_group
archivesBaseName = 'modid'

sourceCompatibility = targetCompatibility = compileJava.sourceCompatibility = compileJava.targetCompatibility = '1.8' // Need this here so eclipse task generates correctly.

minecraft {

	accessTransformer = file('src/main/resources/META-INF/regeneration_at.cfg')


	mappings channel: 'snapshot', version: '20171003-1.12'

	runs {
		client {
			workingDirectory project.file('run')

			// Recommended logging data for a userdev environment
			property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'

			// Recommended logging level for the console
			property 'forge.logging.console.level', 'debug'
		}

		server {

			// Recommended logging data for a userdev environment
			property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'

			// Recommended logging level for the console
			property 'forge.logging.console.level', 'debug'
		}
	}
}

repositories {
	maven {
		name = "IC2"
		url = "http://maven.ic2.player.to"
	}

	maven {
		name = "CurseForge"
		url = "https://minecraft.curseforge.com/api/maven"
	}

	maven {
		name = "JitPack"
		url = "https://jitpack.io"
	}

	maven {
		name = "Progwml6 maven"
		url = "http://dvs1.progwml6.com/files/maven"
	}
}


dependencies {
	minecraft 'net.minecraftforge:forge:1.12.2-14.23.5.2855'
}

dependencies {
	implementation fg.deobf('com.github.Spectre0987:TardisMod:0.1.0E_Hotfix')
	implementation fg.deobf('com.gitlab.lcoremodders:LucraftCore:3fe48363d9')
}

def core_plugin = "me.suff.mc.regen.asm.RegenerationPlugin"

jar {
	manifest {
		attributes "FMLCorePlugin": core_plugin
		attributes "FMLCorePluginContainsFMLMod": "true"
		attributes 'FMLAT': 'regeneration_at.cfg'
	}
}


// Example configuration to allow publishing using the maven-publish task
// This is the preferred method to reobfuscate your jar file
jar.finalizedBy('reobfJar')
// However if you are in a multi-project build, dev time needs unobfed jar files, so you can delay the obfuscation until publishing by doing
//publish.dependsOn('reobfJar')

publishing {
	publications {
		mavenJava(MavenPublication) {
			artifact jar
		}
	}
	repositories {
		maven {
			url "file:///${project.projectDir}/mcmodsrepo"
		}
	}
}
